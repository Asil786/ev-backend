{
  "openapi": "3.0.0",
  "info": {
    "title": "EVJoints Admin API",
    "version": "1.1.0",
    "description": "API documentation for EVJoints Admin Dashboard backend"
  },
  "paths": {
    "/api/customers": {
      "get": {
        "summary": "Get paginated list of customers",
        "description": "Retrieves a paginated list of customers with their vehicle information, device details, and subscription status. Supports server-side sorting.",
        "tags": [
          "Customers"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "Page number for pagination"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "Number of records per page"
          },
          {
            "in": "query",
            "name": "sortBy",
            "schema": {
              "type": "string",
              "enum": [
                "id",
                "firstName",
                "lastName",
                "email",
                "phone",
                "customerRegDate",
                "vehicleRegDate",
                "registrationNumber",
                "vehicleType",
                "manufacturer",
                "vehicleModel",
                "subscription"
              ],
              "default": "customerRegDate"
            },
            "description": "Field to sort by"
          },
          {
            "in": "query",
            "name": "order",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "default": "desc"
            },
            "description": "Sort order (ascending or descending)"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with customer data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CustomersResponse"
                },
                "example": {
                  "data": [
                    {
                      "firstName": "John",
                      "lastName": "Doe",
                      "email": "john.doe@example.com",
                      "phone": "9876543210",
                      "customerRegDate": "2024-01-15T10:30:00.000Z",
                      "vehicleRegDate": "2024-01-20T14:00:00.000Z",
                      "registrationNumber": "MH12AB1234",
                      "subscription": "Premium",
                      "vehicleType": "Car",
                      "manufacturer": "Tata",
                      "vehicleModel": "Nexon EV",
                      "vehicleVariant": "Max",
                      "deviceBrand": "Samsung",
                      "deviceModel": "Galaxy S21",
                      "devicePlatform": "Android",
                      "appVersion": "2.1.0",
                      "navigation": "Yes",
                      "trip": "Yes",
                      "checkIn": "Yes",
                      "vehicles": []
                    }
                  ],
                  "pagination": {
                    "total": 150,
                    "page": 1,
                    "limit": 10
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/stations": {
      "get": {
        "summary": "Get paginated list of station submissions",
        "description": "Retrieves a paginated list of charging station submissions with comprehensive filtering options. Supports filtering by status, date range, and search terms. Returns detailed information including station details, network info, connectors, photos, and eVolts.",
        "tags": [
          "Stations"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "description": "Page number for pagination"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "Number of records per page"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "All",
                "Pending",
                "Approved",
                "Rejected"
              ],
              "default": "All"
            },
            "description": "Filter by approval status"
          },
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Filter stations submitted on or after this date (YYYY-MM-DD)",
            "example": "2024-01-01"
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date"
            },
            "description": "Filter stations submitted on or before this date (YYYY-MM-DD)",
            "example": "2024-12-31"
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Search by station name, landmark, contact number, or station ID",
            "example": "Mumbai Central"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with station data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "example": 123
                          },
                          "stationName": {
                            "type": "string",
                            "example": "Mumbai Central Charging Hub"
                          },
                          "stationNumber": {
                            "type": "string",
                            "example": "CS-123"
                          },
                          "latitude": {
                            "type": "number",
                            "format": "double",
                            "example": 19.0760
                          },
                          "longitude": {
                            "type": "number",
                            "format": "double",
                            "example": 72.8777
                          },
                          "networkId": {
                            "type": "integer",
                            "nullable": true,
                            "example": 5
                          },
                          "networkName": {
                            "type": "string",
                            "example": "Tata Power"
                          },
                          "networkStatus": {
                            "type": "integer",
                            "example": 1
                          },
                          "userId": {
                            "type": "integer",
                            "example": 456
                          },
                          "userName": {
                            "type": "string",
                            "example": "John Doe"
                          },
                          "addedByType": {
                            "type": "string",
                            "example": "CPO"
                          },
                          "contactNumber": {
                            "type": "string",
                            "example": "9876543210"
                          },
                          "usageType": {
                            "type": "string",
                            "enum": [
                              "Public",
                              "Private"
                            ],
                            "example": "Public"
                          },
                          "stationType": {
                            "type": "string",
                            "example": "Shopping Mall"
                          },
                          "operationalHours": {
                            "type": "string",
                            "example": "09:00:00 - 21:00:00"
                          },
                          "status": {
                            "type": "string",
                            "enum": [
                              "Pending",
                              "Approved",
                              "Rejected"
                            ],
                            "example": "Approved"
                          },
                          "statusReason": {
                            "type": "string",
                            "nullable": true,
                            "example": null
                          },
                          "submissionDate": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2024-01-15T10:30:00.000Z"
                          },
                          "approvalDate": {
                            "type": "string",
                            "format": "date-time",
                            "nullable": true,
                            "example": "2024-01-20T14:00:00.000Z"
                          },
                          "photos": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            },
                            "example": [
                              "/uploads/station_123_1.jpg",
                              "/uploads/station_123_2.jpg"
                            ]
                          },
                          "connectors": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {
                                  "type": "integer",
                                  "example": 789
                                },
                                "chargerTypeId": {
                                  "type": "integer",
                                  "example": 2
                                },
                                "type": {
                                  "type": "string",
                                  "example": "CCS2"
                                },
                                "name": {
                                  "type": "string",
                                  "example": "CCS Type 2"
                                },
                                "count": {
                                  "type": "integer",
                                  "example": 2
                                },
                                "powerRating": {
                                  "type": "string",
                                  "example": "60 kW"
                                },
                                "tariff": {
                                  "type": "string",
                                  "example": "₹12/kWh"
                                }
                              }
                            }
                          },
                          "eVolts": {
                            "type": "integer",
                            "example": 500
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer",
                          "example": 150
                        },
                        "page": {
                          "type": "integer",
                          "example": 1
                        },
                        "limit": {
                          "type": "integer",
                          "example": 10
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "success": {
                    "summary": "Successful response with stations",
                    "value": {
                      "data": [
                        {
                          "id": 123,
                          "stationName": "Mumbai Central Charging Hub",
                          "stationNumber": "CS-123",
                          "latitude": 19.0760,
                          "longitude": 72.8777,
                          "networkId": 5,
                          "networkName": "Tata Power",
                          "networkStatus": 1,
                          "userId": 456,
                          "userName": "John Doe",
                          "addedByType": "CPO",
                          "contactNumber": "9876543210",
                          "usageType": "Public",
                          "stationType": "Shopping Mall",
                          "operationalHours": "09:00:00 - 21:00:00",
                          "status": "Approved",
                          "statusReason": null,
                          "submissionDate": "2024-01-15T10:30:00.000Z",
                          "approvalDate": "2024-01-20T14:00:00.000Z",
                          "photos": [
                            "/uploads/station_123_1.jpg"
                          ],
                          "connectors": [
                            {
                              "id": 789,
                              "chargerTypeId": 2,
                              "type": "CCS2",
                              "name": "CCS Type 2",
                              "count": 2,
                              "powerRating": "60 kW",
                              "tariff": "₹12/kWh"
                            }
                          ],
                          "eVolts": 500
                        }
                      ],
                      "pagination": {
                        "total": 150,
                        "page": 1,
                        "limit": 10
                      }
                    }
                  },
                  "empty": {
                    "summary": "No stations found",
                    "value": {
                      "data": [],
                      "pagination": {
                        "total": 0,
                        "page": 1,
                        "limit": 10
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Database connection failed"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/stations/charger-types": {
      "get": {
        "summary": "Get available charger types",
        "tags": [
          "Stations"
        ],
        "responses": {
          "200": {
            "description": "List of charger types",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer"
                      },
                      "name": {
                        "type": "string"
                      },
                      "type": {
                        "type": "string"
                      },
                      "defaultPower": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/stations/{id}": {
      "put": {
        "summary": "Update station details or status",
        "description": "Performs actions on a station submission: SAVE, APPROVE, REJECT.",
        "tags": [
          "Stations"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "Station ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "action"
                ],
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": [
                      "SAVE",
                      "APPROVE",
                      "REJECT"
                    ]
                  },
                  "stationName": {
                    "type": "string"
                  },
                  "stationType": {
                    "type": "string"
                  },
                  "addedByType": {
                    "type": "string",
                    "enum": [
                      "EV Owner",
                      "Station Owner",
                      "CPO"
                    ]
                  },
                  "usageType": {
                    "type": "string",
                    "enum": [
                      "Public",
                      "Private"
                    ]
                  },
                  "latitude": {
                    "type": "number"
                  },
                  "longitude": {
                    "type": "number"
                  },
                  "contactNumber": {
                    "type": "string"
                  },
                  "open_time": {
                    "type": "string"
                  },
                  "close_time": {
                    "type": "string"
                  },
                  "networkId": {
                    "type": "integer",
                    "nullable": true
                  },
                  "networkName": {
                    "type": "string"
                  },
                  "reason": {
                    "type": "string"
                  },
                  "connectors": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "chargerTypeId": {
                          "type": "integer"
                        },
                        "count": {
                          "type": "integer"
                        },
                        "powerRating": {
                          "type": "string"
                        },
                        "tariff": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Action successful"
          },
          "400": {
            "description": "Invalid action or parameters"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/networks": {
      "get": {
        "summary": "Get all networks",
        "description": "Returns a list of active and inactive networks.",
        "tags": [
          "Networks"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "active": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Network"
                      }
                    },
                    "inactive": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Network"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/networks/{id}": {
      "delete": {
        "summary": "Delete a network",
        "tags": [
          "Networks"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            },
            "description": "Network ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Network deleted successfully"
          },
          "404": {
            "description": "Network not found"
          }
        }
      }
    },
    "/api/trips": {
      "get": {
        "summary": "Get paginated list of trip check-ins",
        "description": "Retrieves trip records with filtering by status and story presence.",
        "tags": [
          "Trips"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Page number"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 10
            },
            "description": "Items per page"
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "default": "All"
            },
            "description": "Filter by trip status"
          },
          {
            "in": "query",
            "name": "story",
            "schema": {
              "type": "string",
              "default": "All"
            },
            "description": "Filter by story presence"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TripsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/trips/story/{id}/": {
      "put": {
        "summary": "Update trip story status",
        "tags": [
          "Trips"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": [
                      "Approved",
                      "Rejected"
                    ]
                  },
                  "name": {
                    "type": "string"
                  },
                  "blogLink": {
                    "type": "string"
                  }
                },
                "required": [
                  "action",
                  "name"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Network": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string"
          },
          "status": {
            "type": "integer"
          },
          "liveStatus": {
            "type": "string"
          },
          "approvedStatus": {
            "type": "string"
          }
        }
      },
      "CustomersResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "firstName": {
                  "type": "string"
                },
                "lastName": {
                  "type": "string"
                },
                "email": {
                  "type": "string"
                },
                "phone": {
                  "type": "string"
                }
              }
            }
          },
          "pagination": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer"
              },
              "page": {
                "type": "integer"
              },
              "limit": {
                "type": "integer"
              }
            }
          }
        }
      },
      "TripsResponse": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "pagination": {
            "type": "object",
            "properties": {
              "total": {
                "type": "integer"
              },
              "page": {
                "type": "integer"
              },
              "limit": {
                "type": "integer"
              }
            }
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string"
          }
        }
      }
    }
  },
  "tags": []
}